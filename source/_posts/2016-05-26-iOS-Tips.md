title: iOS Tips
date: 2016-05-26 22:22:14
tags: Tips
categories: iOS
---
## 工具类

### [提取assets.car中的图片](http://io.diveinedu.com/2015/01/15/提取Assets.car中的图片.html)

### [iPhone 6 屏幕揭秘](http://wileam.com/iphone-6-screen-cn/)
### [Xcode常见报错锦囊](http://mp.weixin.qq.com/s?__biz=MjM5OTM0MzIwMQ==&mid=2652546100&idx=1&sn=4ddcd710eb3d93910e58067f2ec797c9&scene=1&srcid=0626DTqmwlU53fE6bc0mL8pw#rd)

## UI类

### UITableView

#### 取消cell的分割线
`tableview.separatorStyle = UITableViewCellSeparatorStyleNone;`

#### UITabelviewCell 的高亮状态的取消
```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    //设置cell的背景是透明的。
    cell.backgroundColor = [UIColor clearColor];
    //取消cell的高亮状态
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
}

//使用下面的这个方法会导致cell不能响应点击事件

- (BOOL)tableView:(UITableView *)tableView shouldHighlightRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}
```
#### 设置分割线的左右偏移量
```
tableView.separatorInset = UIEdgeInsetsMake(0, 100, 0, 0);
```

#### TableView不显示没内容的Cell
```
self.tableView.tableFooterView = [[UIView alloc] init];
```
或者
```
tableView.separatorColor = [UIColor clearColor];
```

#### 更改tableviewcell的小对勾的颜色
`tableView.tintColor = [UIColor redColor];`

### 自定义leftBarbuttonItem，左滑返回手势失效
```
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithImage:img style:UIBarButtonItemStylePlain target:self action:@selector(onBack:)];
self.navigationController.interactivePopGestureRecognizer.delegate = (id<UIGestureRecognizerDelegate>)self;
```

### ScrollView莫名其妙不能在viewController划到顶
`self.automaticallyAdjustsScrollViewInsets = NO;`

### 怎么点击self.view就让键盘收起
```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
   [self.view endEditing:YES];
}
```

### 滑动隐藏NavigationBar
`navigationController.hidesBarsOnSwipe = Yes`

### 导航条返回键隐藏title
`[[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -60) forBarMetrics:UIBarMetricsDefault];`

### 拉伸图片，图片不变形
`UIImage *image = [[UIImage imageNamed:@"xxx"] stretchableImageWithLeftCapWidth:10 topCapHeight:10];`

### NavigationBar透明而不是带模糊的效果
```
[self.navigationBar setBackgroundImage:[UIImage new] forBarMetrics:UIBarMetricsDefault];
self.navigationBar.shadowImage = [UIImage new];
self.navigationBar.translucent = YES;
```

### 修改状态栏样式
在info.plist文件中添加`UIViewControllerBasedStatusBarAppearance`设置为NO
`[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleLightContent];`

### [一句话解决倒计时问题，比如获取验证码倒计时](http://www.jianshu.com/p/ccbbdc776876)
![](http://upload-images.jianshu.io/upload_images/571495-92c1547f64ea24f6.gif)

### [WKWebView的使用和各种坑的解决方法（OC＋Swift）](http://www.jianshu.com/p/403853b63537)

<!-- more -->

## 常用宏

### 尺寸宏
```
#define StatusBar_HEIGHT 20

#define NavigationBar_HEIGHT 44

#define NavigationBarIcon 20

#define TabBar_HEIGHT 49

#define TabBarIcon 30

#define SCREEN_WIDTH ([UIScreen mainScreen].bounds.size.width)

#define SCREEN_HEIGHT ([UIScreen mainScreen].bounds.size.height)
```

### 打印宏
```
//直接替换NSLog
#if DEBUG
#define NSLog(FORMAT, ...) fprintf(stderr,"\n%s:%d %s \t%s\n", [[[NSString stringWithUTF8String:__FILE__] lastPathComponent] UTF8String], __LINE__, __FUNCTION__, [[NSString stringWithFormat:FORMAT, ##__VA_ARGS__] UTF8String]);
#else
#define NSLog(FORMAT, ...) nil
#endif
```

### 系统宏
```
// 获取版本
#define IOS_VERSION [[[UIDevice currentDevice] systemVersion] floatValue]
#define CurrentSystemVersion [[UIDevice currentDevice] systemVersion]

// 获取当前语言
#define CurrentLanguage ([[NSLocale preferredLanguages] objectAtIndex:0])

// 判断是真机还是模拟器
#if TARGET_OS_IPHONE
//iPhone Device
#endif

#if TARGET_IPHONE_SIMULATOR
//iPhone Simulator
#endif

// 检查系统版本
#define SYSTEM_VERSION_EQUAL_TO(v)                  ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] == NSOrderedSame)
#define SYSTEM_VERSION_GREATER_THAN(v)              ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] == NSOrderedDescending)
#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v)  ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending)
#define SYSTEM_VERSION_LESS_THAN(v)                ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] == NSOrderedAscending)
#define SYSTEM_VERSION_LESS_THAN_OR_EQUAL_TO(v)    ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedDescending)
```

### 内存宏
```
// 使用ARC和不使用ARC
#if __has_feature(objc_arc)
//compiling with ARC
#else
// compiling without ARC
#endif

#pragma mark - common functions
#define RELEASE_SAFELY(__POINTER) { [__POINTER release]; __POINTER = nil; }

//释放一个对象
#define SAFE_DELETE(P) if(P) { [P release], P = nil; }

#define SAFE_RELEASE(x) [x release];x=nil
```

### 颜色宏
```
// rgb颜色转换（16进制->10进制）
#define UIColorFromRGB(rgbValue) [UIColor colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 green:((float)((rgbValue & 0xFF00) >> 8))/255.0 blue:((float)(rgbValue & 0xFF))/255.0 alpha:1.0]

// RGB颜色
#define RGBCOLOR(r, g, b) [UIColor colorWithRed:(r)/255.0f green:(g)/255.0f blue:(b)/255.0f alpha:1]
#define RGBACOLOR(r, g, b, a) [UIColor colorWithRed:(r)/255.0f green:(g)/255.0f blue:(b)/255.0f alpha:(a)]

// 背景色
#define BACKGROUNDCOLOR [UIColor colorWithRed:242.0/255.0 green:236.0/255.0 blue:231.0/255.0 alpha:1.0]

// 清除背景色
#define CLEARCOLOR [UIColor clearColor]
```

### 其他宏

```
//方正黑体简体字体定义
#define FONT(F) [UIFont fontWithName:@"FZHTJW--GB1-0" size:(F)]

//定义一个API
#define BaseAPIURL                @"http://xxxxx/"
//登陆API
#define APILogin              [APIURL stringByAppendingString:@"Login"]

//设置View的tag属性
#define VIEWWITHTAG(_OBJECT, _TAG)    [_OBJECT viewWithTag : _TAG]

//G－C－D
#define BACK(block) dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), block)
#define MAIN(block) dispatch_async(dispatch_get_main_queue(),block)

//NSUserDefaults 实例化
#define USER_DEFAULT [NSUserDefaults standardUserDefaults]


//由角度获取弧度 有弧度获取角度
#define degreesToRadian(x) (M_PI * (x) / 180.0)
#define radianToDegrees(radian) (radian*180.0)/(M_PI)
```

### 单例宏
```
#define SYNTHESIZE_SINGLETON_FOR_CLASS(classname) \
\
static classname *shared##classname = nil; \
\
+ (classname *)shared##classname \
{ \
@synchronized(self) \
{ \
if (shared##classname == nil) \
{ \
shared##classname = [[self alloc] init]; \
} \
} \
\
return shared##classname; \
} \
\
+ (id)allocWithZone:(NSZone *)zone \
{ \
@synchronized(self) \
{ \
if (shared##classname == nil) \
{ \
shared##classname = [super allocWithZone:zone]; \
return shared##classname; \
} \
} \
\
return nil; \
} \
\
- (id)copyWithZone:(NSZone *)zone \
{ \
return self; \
}
```

## 第三方库

### 键盘遮挡
[IQKeyboardManager]()

### iOS动画帧速计算类库
[KMCGeigerCounter](https://github.com/kconner/KMCGeigerCounter)

### Gif 播放
[FLAnimatedImage](https://github.com/Flipboard/FLAnimatedImage)

## 其他

### 版本号的命名

根据国际主流的惯例，使用「语义化版本（Semantic Versioning）」的命名方式，有时简称 SemVer。  

**语义化版本号**（以下简称「版本号」）的格式是：**\<major\>.\<minor\>.\<patch\>** 。如：1.4.15、6.2.0。

#### 每一位版本号的含义

* **\<major\>** 即主版本号，俗称大版本升级。改动到主版本号时，标志着 API 发生了巨大变化，包括但不限于新增特性、修改机制、删除功能， **一般不兼容上一个主版本号**。
* **\<minor\>** 即次版本号，俗称小版本升级。当我们进行常规的新增或修改功能时，改动次版本号，但是 **必须是向前兼容的**。这也意味着我们 **不能直接删除某个功能**。如若必要，我们可以在 changelog 中标记某项功能为「即将删除（Deprecated）」，然后在下一个大版本中将其彻底删除。
* **\<patch\>** 即修订号，俗称 bug 修复。顾名思义，如果仅仅为了修复或调整一些小问题，我们就只改动修订号。

#### 注意事项

* 版本号前不要加 v。
* 不要在数字前补 0。错误示例：01.12.03。
* 每一位版本号按照 +1 的速度递增，不要在版本号之间跳跃。
* 主版本号停留在 0 的版本号，即 0.x.x 应当视作还在内部开发阶段的代码。如果代码有公共 API，此时不宜对外公开。
* 1.0.0 的版本号用于界定公共 API 的形成。
* 当次版本号递增时，修订号归零；当主版本号递增时，次版本号、修订号归零。
* 进行新的开发时，版本号从 0.1.0 开始。
* 如果不小心把一个不兼容的改版当成了次版本号发行，应当发行一个新的次版本号来更正这个问题并且恢复向下兼容。注意 不能去修改已发行的版本。

#### 一个典型的版本号发展示例
* 0.1.0
* 0.1.1
* 0.1.2
* 0.2.0
* 1.0.0
* 1.1.0
* 1.1.1
* ……


